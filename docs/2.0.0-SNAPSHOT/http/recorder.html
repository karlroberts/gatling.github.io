




<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Recorder &mdash; Gatling documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Maven+Pro:400,500,700" type="text/css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Inconsolata:400,700" type="text/css" />
    <link rel="stylesheet" href="/vendor/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="/vendor/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="/assets/css/style.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.0-SNAPSHOT',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="/vendor/javascripts/modernizr.min.js"></script>
    <script type="text/javascript" src="/vendor/javascripts/bootstrap.min.js"></script>
    <link rel="top" title="Gatling documentation" href="../index.html" />
    <link rel="up" title="HTTP" href="index.html" />
    <link rel="next" title="Websocket" href="websocket.html" />
    <link rel="prev" title="HTTP Helpers" href="http_helpers.html" />
<!--[if IE]>
<script src="/vendor/javascripts/html5shiv.min.js"></script>
<![endif]-->

<!--[if IE 6]>
<script src="/vendor/javascripts/PIE_IE678.min.js"></script>
<![endif]-->
<!--[if IE 7]>
<script src="/vendor/javascripts/PIE_IE678.min.js"></script>
<![endif]-->
<!--[if IE 9]>
<script src="/vendor/javascripts/PIE_IE9.min.js"></script>
<![endif]-->

<script type="text/javascript">
  // @formatter:off
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-53375088-1', 'gatling.io');
  ga('send', 'pageview');
  // @formatter:on
</script>

<script type='text/javascript'>
  $(document).ready(function () {
    $('#affix').affix({
      offset: {
        top: 48
      }
    });

    $('body').scrollspy({
      target: '#affix'
    })
  });
</script>

  </head>
  <body>
<header id="header" class="navbar navbar-static-top" role="banner">
  <div class="container">
    <div class="navbar" role="navigation">
      <form action="../search.html" class="col-xs-12 col-sm-6 col-md-4" method="get" role="form">
        <div class="form-group">
          <div class="input-group">
            <input type="text" class="form-control" name="q" placeholder="Search through the documentation"/>

            <div class="input-group-addon">
              <button type="submit"><i class="glyphicon glyphicon-search"></i></button>
            </div>
            <div class="input-group-addon">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
            </div>
          </div>
        </div>
        <input type="hidden" name="check_keywords" value="yes"/>
        <input type="hidden" name="area" value="default"/>
      </form>

      <nav id="navbar-collapse" class="collapse navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li><a href="/">HOME</a></li>
          <li><a href="/download">DOWNLOAD</a></li>
          <li class="active"><a href="/docs">DOCUMENTATION</a></li>
          <li><a href="/services">PROFESSIONAL SERVICES</a></li>
          <li><a class="icon icon-github" href="https://github.com/gatling/gatling"></a></li>
          <li><a class="icon icon-twitter" href="https://twitter.com/GatlingTool"></a></li>
          <li><a class="icon icon-googlegroup" href="https://groups.google.com/forum/#!forum/gatling"></a></li>
        </ul>
      </nav>
      <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
  </div>
</header>

<section id="doc">
  <div class="container">
    <section class="row">
      <div class="col-md-9">
          <ul class="breadcrumb">
            <li><a href="../index.html">Gatling documentation</a></li>
            <li><a href="index.html"
              accesskey="U">
              HTTP
              </a>
            </li>
            <li><a href="">
              Recorder
            </a></li>
          </ul>
          
  <div class="section" id="recorder">
<span id="id1"></span><h1>Recorder<a class="headerlink" href="#recorder" title="Permalink to this headline">¶</a></h1>
<p>The Gatling Recorder helps you to quickly generate scenarios, by either acting as a HTTP proxy between the browser and the HTTP server or converting HAR (Http ARchive) files.
Either way, the Recorder generates a simple simulation that mimics your recorded navigation.</p>
<p>If you&#8217;re using the bundle, you can launch it with the following script <tt class="docutils literal"><span class="pre">$GATLING_HOME/bin/recorder.sh</span></tt>.
You will get a window that looks like this one:</p>
<img alt="../_images/recorder.png" src="../_images/recorder.png" />
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="local-proxy-port">
<h3>Local proxy port<a class="headerlink" href="#local-proxy-port" title="Permalink to this headline">¶</a></h3>
<p>In the Recorder, you have to define one port (for both HTTP and HTTPS): the local proxy port. This is the port your browser must connect to so that the Recorder is able to capture your navigation.
Then, you have to configure your browser to use the defined port.</p>
<p>Here is how to do with Firefox, open the browser settings:</p>
<img alt="../_images/recorder-browser_settings.png" src="../_images/recorder-browser_settings.png" />
<p>Then, update the connection settings:</p>
<img alt="../_images/recorder-browser_advanced_settings.png" src="../_images/recorder-browser_advanced_settings.png" />
</div>
<div class="section" id="outgoing-proxy">
<h3>Outgoing proxy<a class="headerlink" href="#outgoing-proxy" title="Permalink to this headline">¶</a></h3>
<p>If you must access your web application through a proxy, you can set it up in this section. Two different ports can be defined for the outgoing proxy (HTTP &amp; HTTPS).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Even if HTTP and HTTPS are on the same port for the outgoing proxy, you need to explicitly specify both.</p>
</div>
</div>
<div class="section" id="filters">
<h3>Filters<a class="headerlink" href="#filters" title="Permalink to this headline">¶</a></h3>
<p>Allow you to filter out some requests you don&#8217;t want to record. For example, if you don&#8217;t want to record any CSS files, you can add in the blacklist section the following Java regex <tt class="docutils literal"><span class="pre">.*\\.css</span></tt>.</p>
<p>The order of evaluation between the whitelist and the blacklist entries can be determined with the <em>strategy</em> setting. You can either evaluate the whitelist or the blacklist first.</p>
</div>
<div class="section" id="embedded-resources-fetching">
<h3>Embedded resources fetching<a class="headerlink" href="#embedded-resources-fetching" title="Permalink to this headline">¶</a></h3>
<p>If you check the option &#8216;Fetch html resources?&#8217; option, the Recorder will fetch the embedded HTML resources as follow:</p>
<ul class="simple">
<li>Add <tt class="docutils literal"><span class="pre">inferHtmlResources</span></tt> with the proper white/black lists on the HTTP protocol definition.</li>
<li>Parse HTML response body to retrieve embedded HTML resources.</li>
<li>Filter requests corresponding to embedded HTML resources from resulting <tt class="docutils literal"><span class="pre">Scenario</span></tt>.</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Gatling can&#8217;t retrieve all the embedded resources in HTML as images embedded in a css embedded in HTML.
This remaining resources are currently loaded sequentially as regular requests.</p>
</div>
</div>
</div>
<div class="section" id="running">
<h2>Running<a class="headerlink" href="#running" title="Permalink to this headline">¶</a></h2>
<p>Once everything has been configured, press the <strong>Start</strong> button to launch the recorder.</p>
<div class="section" id="recorded-events">
<h3>Recorded Events<a class="headerlink" href="#recorded-events" title="Permalink to this headline">¶</a></h3>
<p>As you navigate through your application, the recorder will log three kinds of events:</p>
<ul class="simple">
<li><strong>Requests</strong>: The requests sent by the browser.</li>
<li><strong>Pauses</strong>: The time between each request.</li>
<li><strong>Tags</strong>: Manually set markers.</li>
</ul>
</div>
<div class="section" id="tag-events">
<h3>Tag Events<a class="headerlink" href="#tag-events" title="Permalink to this headline">¶</a></h3>
<p>To make your scenario more understandable, you can add tags, they will appear as comments in the scenario: <tt class="docutils literal"><span class="pre">/*</span> <span class="pre">my</span> <span class="pre">tag</span> <span class="pre">*/</span></tt></p>
<p>To add a tag, fill in the text field provided and press the <strong>Add</strong> button. After that, the tag will be displayed in the list below.</p>
<p>For example: <tt class="docutils literal"><span class="pre">TAG</span> <span class="pre">|</span> <span class="pre">my</span> <span class="pre">tag</span></tt></p>
</div>
<div class="section" id="stop">
<h3>Stop<a class="headerlink" href="#stop" title="Permalink to this headline">¶</a></h3>
<p>When you have finished recording your scenario, press the <strong>Stop</strong> button to save it in the format defined in the configuration.</p>
</div>
</div>
<div class="section" id="har-files">
<h2>HAR Files<a class="headerlink" href="#har-files" title="Permalink to this headline">¶</a></h2>
<p>You can import a HAR file (Http Archive) into the Recorder and convert it to a Gatling simulation.</p>
<p>HAR files can be obtained using the Chrome Developer Tools or with Firebug and the NetExport Firebug extension.</p>
<p>With Chrome Developer Tools, go to <em>Network</em> tab, and make sure you&#8217;ve selected the <em>Preserve log</em> checkbox, otherwise the log is reset when you change page.
Select the requests you want to export, then right click and select <em>Copy All as HAR</em> and save what&#8217;s in your clipboard into a file.</p>
<p>Please don&#8217;t use <a class="reference external" href="http://www.charlesproxy.com">Charles Proxy</a> for this.
Charles is an amazing tool and has an HAR export feature, but it&#8217;s a proxy, so when you use it, you change the HTTP behavior, and the HAR would contain requests that should be here, such as CONNECTs.</p>
<p>To import a HAR file, select the <em>HAR converter</em> mode in the top right dropdown in the Recorder.</p>
</div>
<div class="section" id="certificates">
<h2>Certificates<a class="headerlink" href="#certificates" title="Permalink to this headline">¶</a></h2>
<p>Recording browsers&#8217; http traffic over ssl is possible ususally as the browser allows the user the option to accept a self signed certificate.
Devices other than browsers may not provide that option, making it impossible to record SSL traffic on those devices.</p>
<p>A set of certificates can be generated to allow devices to trust the recorder proxy.</p>
<p>As creating fake certificates in this way could be misused the lifetime of the certificates can be set to 1 day to ensure that they cannot be misused at a later date.</p>
<p>Steps:</p>
<ul class="simple">
<li>Generate a Certificate Authority certficate</li>
<li>Generate a server certificate signed by the CA certificate for the proxy. The certificate is generated against the site domain name(s) being recorded</li>
<li>Import the server certificate and Chain (CA cert) into a java keystore</li>
<li>Import the CA certificate into the Device/Client</li>
<li>configure the recorder to use the custom keystore</li>
</ul>
<div class="section" id="generating-the-custom-certificates">
<h3>Generating the custom certificates<a class="headerlink" href="#generating-the-custom-certificates" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Certificate Authority</li>
</ul>
<p>OpenSSL commands:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">openssl</span> <span class="n">genrsa</span> <span class="o">-</span><span class="n">out</span> <span class="n">rootCA</span><span class="o">.</span><span class="n">key</span> <span class="mi">2048</span>
<span class="n">openssl</span> <span class="n">req</span> <span class="o">-</span><span class="n">x509</span> <span class="o">-</span><span class="k">new</span> <span class="o">-</span><span class="n">nodes</span> <span class="o">-</span><span class="n">key</span> <span class="n">rootCA</span><span class="o">.</span><span class="n">key</span> <span class="o">-</span><span class="n">days</span> <span class="mi">1</span> <span class="o">-</span><span class="n">out</span> <span class="n">rootCA</span><span class="o">.</span><span class="n">pem</span>
<span class="n">openssl</span> <span class="n">x509</span> <span class="o">-</span><span class="n">outform</span> <span class="n">der</span> <span class="o">-</span><span class="n">in</span> <span class="n">rootCA</span><span class="o">.</span><span class="n">pem</span> <span class="o">-</span><span class="n">out</span> <span class="n">gatlingCA</span><span class="o">.</span><span class="n">crt</span>
</pre></div>
</div>
<ul class="simple">
<li>Proxy SSL certificate</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the &#8216;common name&#8217; (which is deprecated but still works) and/or &#8216;Subject Alternative Name&#8217; should match the domain name(s) that you are testing through the proxy.</p>
</div>
<p>OpenSSL commands:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">openssl</span> <span class="n">genrsa</span> <span class="o">-</span><span class="n">out</span> <span class="n">device</span><span class="o">.</span><span class="n">key</span> <span class="mi">2048</span>
<span class="n">openssl</span> <span class="n">req</span> <span class="o">-</span><span class="k">new</span> <span class="o">-</span><span class="n">key</span> <span class="n">device</span><span class="o">.</span><span class="n">key</span> <span class="o">-</span><span class="n">out</span> <span class="n">device</span><span class="o">.</span><span class="n">csr</span>
<span class="n">openssl</span> <span class="n">x509</span> <span class="o">-</span><span class="n">req</span> <span class="o">-</span><span class="n">in</span> <span class="n">device</span><span class="o">.</span><span class="n">csr</span> <span class="o">-</span><span class="nc">CA</span> <span class="n">rootCA</span><span class="o">.</span><span class="n">pem</span> <span class="o">-</span><span class="nc">CAkey</span> <span class="n">rootCA</span><span class="o">.</span><span class="n">key</span> <span class="o">-</span><span class="nc">CAcreateserial</span> <span class="o">-</span><span class="n">out</span> <span class="n">device</span><span class="o">.</span><span class="n">crt</span> <span class="o">-</span><span class="n">days</span> <span class="mi">1</span>
<span class="n">openssl</span> <span class="n">pkcs12</span> <span class="o">-</span><span class="n">export</span> <span class="o">-</span><span class="n">in</span> <span class="n">device</span><span class="o">.</span><span class="n">crt</span> <span class="o">-</span><span class="n">inkey</span> <span class="n">device</span><span class="o">.</span><span class="n">key</span> <span class="o">-</span><span class="n">out</span> <span class="n">server</span><span class="o">.</span><span class="n">p12</span> <span class="o">-</span><span class="n">name</span> <span class="n">gatling</span> <span class="o">-</span><span class="nc">CAfile</span> <span class="n">rootCA</span><span class="o">.</span><span class="n">pem</span> <span class="o">-</span><span class="n">caname</span> <span class="n">gatling</span> <span class="o">-</span><span class="n">chain</span>
<span class="n">keytool</span> <span class="o">-</span><span class="n">importkeystore</span> <span class="o">-</span><span class="n">deststorepass</span> <span class="n">gatling</span> <span class="o">-</span><span class="n">destkeypass</span> <span class="n">gatling</span> <span class="o">-</span><span class="n">destkeystore</span> <span class="n">gatling</span><span class="o">-</span><span class="n">custom</span><span class="o">.</span><span class="n">jks</span>  <span class="o">-</span><span class="n">srckeystore</span> <span class="n">server</span><span class="o">.</span><span class="n">p12</span> <span class="o">-</span><span class="n">srcstoretype</span> <span class="nc">PKCS12</span> <span class="o">-</span><span class="n">srcstorepass</span> <span class="n">gatling</span> <span class="o">-</span><span class="n">alias</span> <span class="n">gatling</span>
</pre></div>
</div>
</div>
<div class="section" id="configuring-set-up">
<h3>Configuring / Set up<a class="headerlink" href="#configuring-set-up" title="Permalink to this headline">¶</a></h3>
<p>Install the CA certficate into the client device - gatlingCA.crt</p>
<p>Configure the recorder to use the custom java keystore - gatling-custom.jks</p>
</div>
</div>
<div class="section" id="command-line-options">
<h2>Command-line options<a class="headerlink" href="#command-line-options" title="Permalink to this headline">¶</a></h2>
<p>For those who prefer the command line, command line options can be passed to the Recorder:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="38%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option (short)</th>
<th class="head">Option (long)</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-lp &lt;port&gt;</td>
<td>&#8211;local-port &lt;port&gt;</td>
<td>Local Proxy HTTP/HTTPS port</td>
</tr>
<tr class="row-odd"><td>-ph &lt;port&gt;</td>
<td>&#8211;proxy-host &lt;port&gt;</td>
<td>Outgoing proxy host</td>
</tr>
<tr class="row-even"><td>-pp &lt;port&gt;</td>
<td>&#8211;proxy-port &lt;port&gt;</td>
<td>Outgoing proxy port</td>
</tr>
<tr class="row-odd"><td>-pps &lt;port&gt;</td>
<td>&#8211;proxy-port-ssl &lt;port&gt;</td>
<td>Outgoing proxy SSL port</td>
</tr>
<tr class="row-even"><td>-of &lt;path&gt;</td>
<td>&#8211;output-folder &lt;path&gt;</td>
<td>Output folder for generated simulations</td>
</tr>
<tr class="row-odd"><td>-rbf &lt;path&gt;</td>
<td>&#8211;request-bodies-folder &lt;path&gt;</td>
<td>Folder for requests bodies</td>
</tr>
<tr class="row-even"><td>-cn &lt;className&gt;</td>
<td>&#8211;class-name &lt;className&gt;</td>
<td>Name of the generated simulation</td>
</tr>
<tr class="row-odd"><td>-pkg &lt;packageName&gt;</td>
<td>&#8211;package &lt;packageName&gt;</td>
<td>Package of the generated simulation</td>
</tr>
<tr class="row-even"><td>-enc &lt;encoding&gt;</td>
<td>&#8211;encoding &lt;encoding&gt;</td>
<td>Encoding used in the Recorder</td>
</tr>
<tr class="row-odd"><td>-fr &lt;true|false&gt;</td>
<td>&#8211;follow-redirect &lt;true|false&gt;</td>
<td>Enable <em>Follow Redirects</em></td>
</tr>
<tr class="row-even"><td>-ar &lt;true|false&gt;</td>
<td>&#8211;automatic-referer &lt;true|false&gt;</td>
<td>Enable <em>Automatic Referers</em></td>
</tr>
<tr class="row-odd"><td>-fhr &lt;true|false&gt;</td>
<td>&#8211;fetch-html-resources &lt;true|false&gt;</td>
<td>Enable <em>Fetch html resources</em></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Command-line options override saved preferences.</p>
</div>
</div>
<div class="section" id="system-properties">
<h2>System properties<a class="headerlink" href="#system-properties" title="Permalink to this headline">¶</a></h2>
<p>There are 2 system properties to control the use of a custom certificate keystore for the proxy:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">gatling.recorder.keystore.path</span></tt></li>
<li><tt class="docutils literal"><span class="pre">gatling.recorder.keystore.passphrase</span></tt></li>
</ul>
</div>
</div>


        </div>
        <div class="col-md-3">
          <aside id="affix" class="visible-md visible-lg">
            <ul class="nav">
<li><a class="reference internal" href="#">Recorder</a><ul class="nav">
<li><a class="reference internal" href="#configuration">Configuration</a><ul class="nav">
<li><a class="reference internal" href="#local-proxy-port">Local proxy port</a></li>
<li><a class="reference internal" href="#outgoing-proxy">Outgoing proxy</a></li>
<li><a class="reference internal" href="#filters">Filters</a></li>
<li><a class="reference internal" href="#embedded-resources-fetching">Embedded resources fetching</a></li>
</ul>
</li>
<li><a class="reference internal" href="#running">Running</a><ul class="nav">
<li><a class="reference internal" href="#recorded-events">Recorded Events</a></li>
<li><a class="reference internal" href="#tag-events">Tag Events</a></li>
<li><a class="reference internal" href="#stop">Stop</a></li>
</ul>
</li>
<li><a class="reference internal" href="#har-files">HAR Files</a></li>
<li><a class="reference internal" href="#certificates">Certificates</a><ul class="nav">
<li><a class="reference internal" href="#generating-the-custom-certificates">Generating the custom certificates</a></li>
<li><a class="reference internal" href="#configuring-set-up">Configuring / Set up</a></li>
</ul>
</li>
<li><a class="reference internal" href="#command-line-options">Command-line options</a></li>
<li><a class="reference internal" href="#system-properties">System properties</a></li>
</ul>
</li>
</ul>

            
<hr>
<ul class="nav">
  <h5>Previous topic</h5>
  <li>
    <a href="http_helpers.html" title="Previous Chapter: HTTP Helpers">
      HTTP Helpers
    </a>
  </li>
  <h5>Next topic</h5>
  <li>
    <a href="websocket.html" title="Next Chapter: Websocket">
      Websocket
    </a>
  </li>
</ul>
          </aside>
        </div>
      </div>
    </section>
  </div>
</section>

<footer id="footer">
  <header class="row-fluid">
    <div class="content-wrapper text-center">
      Gatling is an open-source load testing framework based on
      <strong>Scala</strong>, <strong>Akka</strong> and <strong>Netty</strong>
    </div>
  </header>
  <section class="row-fluid">
    <div class="content-wrapper text-center">&copy;2014 eBusiness Information 2000-2014</div>
  </section>
</footer>






  </body>
</html>