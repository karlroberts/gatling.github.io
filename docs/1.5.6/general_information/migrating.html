




<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Migrating &mdash; Gatling documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Maven+Pro:400,500,700" type="text/css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Inconsolata:400,700" type="text/css" />
    <link rel="stylesheet" href="/vendor/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="/vendor/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="/assets/css/style.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.5.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="/vendor/javascripts/modernizr.min.js"></script>
    <script type="text/javascript" src="/vendor/javascripts/bootstrap.min.js"></script>
    <link rel="top" title="Gatling documentation" href="../index.html" />
    <link rel="up" title="General Information" href="index.html" />
    <link rel="next" title="Continuous Integration" href="continuous_integration.html" />
    <link rel="prev" title="Changelog" href="changelog.html" />
<!--[if IE]>
<script src="/vendor/javascripts/html5shiv.min.js"></script>
<![endif]-->

<!--[if IE 6]>
<script src="/vendor/javascripts/PIE_IE678.min.js"></script>
<![endif]-->
<!--[if IE 7]>
<script src="/vendor/javascripts/PIE_IE678.min.js"></script>
<![endif]-->
<!--[if IE 9]>
<script src="/vendor/javascripts/PIE_IE9.min.js"></script>
<![endif]-->

<script type="text/javascript">
  // @formatter:off
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-53375088-1', 'gatling.io');
  ga('send', 'pageview');
  // @formatter:on
</script>

<script type='text/javascript'>
  $(document).ready(function () {
    $('#affix').affix({
      offset: {
        top: 48
      }
    });

    $('body').scrollspy({
      target: '#affix'
    })
  });
</script>

  </head>
  <body>
<header id="header" class="navbar navbar-static-top" role="banner">
  <div class="container">
    <div class="navbar" role="navigation">
      <form action="../search.html" class="col-xs-12 col-sm-6 col-md-4" method="get" role="form">
        <div class="form-group">
          <div class="input-group">
            <input type="text" class="form-control" name="q" placeholder="Search through the documentation"/>

            <div class="input-group-addon">
              <button type="submit"><i class="glyphicon glyphicon-search"></i></button>
            </div>
            <div class="input-group-addon">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
            </div>
          </div>
        </div>
        <input type="hidden" name="check_keywords" value="yes"/>
        <input type="hidden" name="area" value="default"/>
      </form>

      <nav id="navbar-collapse" class="collapse navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li><a href="/">HOME</a></li>
          <li><a href="/download">DOWNLOAD</a></li>
          <li><a href="/docs">DOCUMENTATION</a></li>
          <li><a href="/services">PROFESSIONAL SERVICES</a></li>
          <li><a class="icon icon-github" href="https://github.com/gatling/gatling"></a></li>
          <li><a class="icon icon-twitter" href="https://twitter.com/GatlingTool"></a></li>
          <li><a class="icon icon-googlegroup" href="https://groups.google.com/forum/#!forum/gatling"></a></li>
        </ul>
      </nav>
      <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
  </div>
</header>

<section id="doc">
  <div class="container">
    <section class="row">
      <div class="col-md-9">
          <ul class="breadcrumb">
            <li><a href="../index.html">Gatling documentation</a></li>
            <li><a href="index.html"
              accesskey="U">
              General Information
              </a>
            </li>
            <li><a href="">
              Migrating
            </a></li>
          </ul>
          
  <div class="section" id="migrating">
<h1>Migrating<a class="headerlink" href="#migrating" title="Permalink to this headline">¶</a></h1>
<div class="section" id="from-1-4-6-to-1-5-0">
<h2>From 1.4.6 to 1.5.0<a class="headerlink" href="#from-1-4-6-to-1-5-0" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>the <tt class="docutils literal"><span class="pre">gatling.conf</span></tt> file format has changed (some blocks have been moved, so fields renamed)</li>
<li>the custom JsonPath engine has been dropped in favor of <a class="reference external" href="https://github.com/jayway/JsonPath">Jayway&#8217;s one</a>. Checkout <a class="reference external" href="http://goessner.net/articles/JsonPath">here</a> for the new syntax. You can also use <a class="reference external" href="http://jsonpath.curiousconcept.com">this site</a> to check your expressions.</li>
<li>the underlying CSS Selectors implementation <a class="reference external" href="http://jodd.org/doc/csselly">Jodd&#8217;s CSSelly</a> has been replaced with <a class="reference external" href="http://jsoup.org">Jsoup</a> that is much more performant according to our benchmarks. In most case, migration should be transparent, but you might face minor syntax differences. For example, Jsoup doesn&#8217;t support <tt class="docutils literal"><span class="pre">a[href=&quot;api&quot;]</span></tt> but only <tt class="docutils literal"><span class="pre">a[href=api]</span></tt>.</li>
<li>By default, users now have their own HTTP connections. This behavior can be disabled (connections will be shared) with <tt class="docutils literal"><span class="pre">.shareConnection</span></tt> when setting the HTTP protocol.</li>
<li><tt class="docutils literal"><span class="pre">doIfOrElse</span></tt> has been renamed into <tt class="docutils literal"><span class="pre">doIfEqualsOrElse</span></tt></li>
</ul>
</div>
<div class="section" id="from-1-4-5-to-1-4-6">
<h2>From 1.4.5 to 1.4.6<a class="headerlink" href="#from-1-4-5-to-1-4-6" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The maven plugin property named <tt class="docutils literal"><span class="pre">simulation</span></tt> was causing a clash with <tt class="docutils literal"><span class="pre">gatling.conf</span></tt> when passed as System property <tt class="docutils literal"><span class="pre">-Dgatling.simulation</span></tt>. As a consequence, it was renamed into <tt class="docutils literal"><span class="pre">simulationClass</span></tt>. Please update your pom.xml or your System properties if you were using it.</li>
<li>In JsonPath, the attribute axis was redondant with the child one (in JSON, there&#8217;s no distinction between a child and an attribute, everything is just a property) and was causing bugs. As a consequence, it was dropped. Please use the child axis instead (for example <tt class="docutils literal"><span class="pre">foo[bar='baz']</span></tt> instead of <tt class="docutils literal"><span class="pre">foo[&#64;bar='baz']</span></tt>)</li>
</ul>
</div>
<div class="section" id="from-1-3-x-to-1-4-0">
<span id="x-migration"></span><h2>From 1.3.X to 1.4.0<a class="headerlink" href="#from-1-3-x-to-1-4-0" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">In order to use the new Assertions API, you need to add the following import</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">import</span> <span class="nn">assertions._</span>
</pre></div>
</div>
</li>
<li><p class="first">Maven plugin has been rewritten :</p>
<ul class="simple">
<li>gatling-charts-highcharts is now a project dependency instead of a plugin dependency</li>
<li>Maven plugin supports both fork (fork a new JVM to execute Gatling) and in-process (execute Gatling in the same process as Maven) execution modes</li>
</ul>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">Host</span></tt> HTTP header is now automatically computed, so <tt class="docutils literal"><span class="pre">.hostHeader</span></tt> method on HttpProtocolConfiguration has been removed.</p>
</li>
<li><p class="first">Simulation classes format has changed:</p>
<ul class="simple">
<li>No more apply method that has to return a List</li>
<li>New setUp method used to register configured scenarios: <tt class="docutils literal"><span class="pre">setUp(scn.users(100))</span></tt></li>
<li>No more <tt class="docutils literal"><span class="pre">.configure</span></tt> when configuring a scenario (see example above)</li>
</ul>
</li>
</ul>
<p>So, a 1.3.X simulation that looked like this one</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">class</span> <span class="nc">GoogleSimulation</span> <span class="k">extends</span> <span class="nc">Simulation</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">httpConf</span> <span class="k">=</span> <span class="n">httpConfig</span><span class="o">.</span><span class="n">baseURL</span><span class="o">(</span><span class="s">&quot;http://www.google.com&quot;</span><span class="o">)</span>
  <span class="k">def</span> <span class="n">apply</span> <span class="k">=</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">scn</span> <span class="k">=</span> <span class="n">scenario</span><span class="o">(</span><span class="s">&quot;Google scenario&quot;</span><span class="o">)</span>
                <span class="o">.</span><span class="n">exec</span><span class="o">(</span><span class="n">http</span><span class="o">(</span><span class="s">&quot;Google gatling&quot;</span><span class="o">)</span>
                  <span class="o">.</span><span class="n">get</span><span class="o">(</span><span class="s">&quot;/search&quot;</span><span class="o">)</span>
                  <span class="o">.</span><span class="n">queryParam</span><span class="o">(</span><span class="s">&quot;q&quot;</span><span class="o">,</span> <span class="s">&quot;gatling tool&quot;</span><span class="o">))</span>
    <span class="nc">List</span><span class="o">(</span><span class="n">scn</span><span class="o">.</span><span class="n">configure</span><span class="o">.</span><span class="n">users</span><span class="o">(</span><span class="mi">10</span><span class="o">).</span><span class="n">ramp</span><span class="o">(</span><span class="mi">10</span><span class="o">).</span><span class="n">protocolConfig</span><span class="o">(</span><span class="n">httpConf</span><span class="o">))</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>should now be written like that</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">class</span> <span class="nc">GoogleSimulation</span> <span class="k">extends</span> <span class="nc">Simulation</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">httpConf</span> <span class="k">=</span> <span class="n">httpConfig</span><span class="o">.</span><span class="n">baseURL</span><span class="o">(</span><span class="s">&quot;http://www.google.com&quot;</span><span class="o">)</span>
  <span class="k">val</span> <span class="n">scn</span> <span class="k">=</span> <span class="n">scenario</span><span class="o">(</span><span class="s">&quot;Google scenario&quot;</span><span class="o">)</span>
              <span class="o">.</span><span class="n">exec</span><span class="o">(</span><span class="n">http</span><span class="o">(</span><span class="s">&quot;Google gatling&quot;</span><span class="o">)</span>
                <span class="o">.</span><span class="n">get</span><span class="o">(</span><span class="s">&quot;/search&quot;</span><span class="o">)</span>
                <span class="o">.</span><span class="n">queryParam</span><span class="o">(</span><span class="s">&quot;q&quot;</span><span class="o">,</span> <span class="s">&quot;gatling tool&quot;</span><span class="o">))</span>
  <span class="n">setUp</span><span class="o">(</span><span class="n">scn</span><span class="o">.</span><span class="n">users</span><span class="o">(</span><span class="mi">10</span><span class="o">).</span><span class="n">ramp</span><span class="o">(</span><span class="mi">10</span><span class="o">).</span><span class="n">protocolConfig</span><span class="o">(</span><span class="n">httpConf</span><span class="o">))</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="from-1-2-x-to-1-3-0">
<span id="migration"></span><h2>From 1.2.X to 1.3.0<a class="headerlink" href="#from-1-2-x-to-1-3-0" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">gatling.conf</span></tt> file format has changed, beware of not simply replace a 1.3.0 file from a previous 1.2.X settings</li>
<li><tt class="docutils literal"><span class="pre">doIf</span></tt> has been rewritten to look more like a control structure.</li>
</ul>
<p><tt class="docutils literal"><span class="pre">doIf(condition,</span> <span class="pre">chain)</span></tt> had to be removed due to compatibility issues with the new API.</p>
<p>You should now be using:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">doIf</span><span class="o">(</span><span class="n">condition</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// then</span>
<span class="o">}</span>

<span class="n">doIfOrElse</span><span class="o">(</span><span class="n">condition</span><span class="o">)</span> <span class="o">{</span>
 <span class="c1">// then</span>
<span class="o">}</span> <span class="o">{</span>
 <span class="c1">// else</span>
<span class="o">}</span>
</pre></div>
</div>
<ul class="simple">
<li>Durations should no longer be expressed as <tt class="docutils literal"><span class="pre">(value,</span> <span class="pre">unit)</span></tt>. Methods with this kind of signature are now deprecated and will be removed in 1.4.0.</li>
</ul>
<p>You should now be using the Akka (Scala-to-be) DSL and write them in plain, like in <tt class="docutils literal"><span class="pre">5</span> <span class="pre">seconds</span></tt>.</p>
<ul class="simple">
<li>Loops have been refactored to look more like control structures.</li>
</ul>
<p><tt class="docutils literal"><span class="pre">loop().times/during/asLongAs</span></tt> has been deprecated and will be removed in 1.4.0.</p>
<p>You should now be using:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">repeat</span><span class="o">(</span><span class="n">times</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// looped chain</span>
<span class="o">}</span>

<span class="n">during</span><span class="o">(</span><span class="n">duration</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// looped chain</span>
<span class="o">}</span>

<span class="n">asLongAs</span><span class="o">(</span><span class="n">condition</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// looped chain</span>
<span class="o">}</span>
</pre></div>
</div>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">chain.</span></tt> usage has been deprecated and will be removed in 1.4.0. You can now directly bootstrap.</li>
</ul>
<p>In order to do so, you have to add the following line in existing simulations:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">import</span> <span class="nn">boostrap._</span>
</pre></div>
</div>
<ul class="simple">
<li>Feeders are now real Iterators. Beware if you&#8217;ve been building your own ones.</li>
</ul>
</div>
<div class="section" id="from-1-1-x-to-1-2-0">
<span id="id1"></span><h2>From 1.1.X to 1.2.0<a class="headerlink" href="#from-1-1-x-to-1-2-0" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>As the recorder has been ported from Java to Scala, preference serialization has changed. As a consequence, you will have to remove the <tt class="docutils literal"><span class="pre">gatling-recorder.ini</span></tt> file from your home directory if you&#8217;ve previously saved your recorder preferences.</li>
<li><tt class="docutils literal"><span class="pre">followRedirect</span></tt> is now enabled by default, see wiki <a class="reference internal" href="../user_documentation/reference/http.html#http-follow-redirects"><em>HTTP chapter</em></a></li>
<li><tt class="docutils literal"><span class="pre">maybe</span></tt> check condition becomes <tt class="docutils literal"><span class="pre">whatever</span></tt>, see wiki <a class="reference internal" href="../user_documentation/reference/checks.html#checks-whatever"><em>Checks chapter</em></a></li>
</ul>
</div>
<div class="section" id="from-1-0-x-to-1-1-0">
<span id="id2"></span><h2>From 1.0.X to 1.1.0<a class="headerlink" href="#from-1-0-x-to-1-1-0" title="Permalink to this headline">¶</a></h2>
<div class="section" id="txt-scenario-format-has-been-dropped">
<h3>Txt scenario format has been dropped!<a class="headerlink" href="#txt-scenario-format-has-been-dropped" title="Permalink to this headline">¶</a></h3>
<p>No sweat: you can easily convert them into Scala format:</p>
<ul>
<li><p class="first">change extension to .scala</p>
</li>
<li><p class="first">surround your simulation with the following code to make it a scala class</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">import</span> <span class="nn">com.excilys.ebi.gatling.core.Predef._</span>
<span class="k">import</span> <span class="nn">com.excilys.ebi.gatling.http.Predef._</span>
<span class="k">import</span> <span class="nn">com.excilys.ebi.gatling.jdbc.Predef._</span>

<span class="k">class</span> <span class="nc">YourSimulationName</span> <span class="k">extends</span> <span class="nc">Simulation</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">apply</span> <span class="k">=</span> <span class="o">{</span>
    <span class="nc">YOUR</span> <span class="nc">SIMULATION</span> <span class="nc">COMES</span> <span class="nc">HERE</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</li>
<li><p class="first">replace &#8220;runSimulations&#8221; by &#8220;List&#8221;</p>
</li>
</ul>
</div>
<div class="section" id="simulation-class-is-no-longer-an-app">
<h3>Simulation class is no longer an App<a class="headerlink" href="#simulation-class-is-no-longer-an-app" title="Permalink to this headline">¶</a></h3>
<p>Same thing above, you have to wrap your existing code with an apply method and return a List.</p>
</div>
<div class="section" id="check-api-changes">
<h3>Check API changes<a class="headerlink" href="#check-api-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">eq</span></tt> becomes <tt class="docutils literal"><span class="pre">is</span></tt></li>
<li><tt class="docutils literal"><span class="pre">neq</span></tt> becomes <tt class="docutils literal"><span class="pre">not</span></tt></li>
</ul>
</div>
<div class="section" id="launching-the-recorder">
<h3>Launching the recorder<a class="headerlink" href="#launching-the-recorder" title="Permalink to this headline">¶</a></h3>
<p>The recorder is no longer an ubber jar, so it is now located in the lib directory.
As it depends on other libraries, it is now to be launched from the recorder.sh/bat located in the bin directory.</p>
</div>
</div>
</div>


        </div>
        <div class="col-md-3">
          <aside id="affix" class="visible-md visible-lg">
            <ul class="nav">
<li><a class="reference internal" href="#">Migrating</a><ul class="nav">
<li><a class="reference internal" href="#from-1-4-6-to-1-5-0">From 1.4.6 to 1.5.0</a></li>
<li><a class="reference internal" href="#from-1-4-5-to-1-4-6">From 1.4.5 to 1.4.6</a></li>
<li><a class="reference internal" href="#from-1-3-x-to-1-4-0">From 1.3.X to 1.4.0</a></li>
<li><a class="reference internal" href="#from-1-2-x-to-1-3-0">From 1.2.X to 1.3.0</a></li>
<li><a class="reference internal" href="#from-1-1-x-to-1-2-0">From 1.1.X to 1.2.0</a></li>
<li><a class="reference internal" href="#from-1-0-x-to-1-1-0">From 1.0.X to 1.1.0</a><ul class="nav">
<li><a class="reference internal" href="#txt-scenario-format-has-been-dropped">Txt scenario format has been dropped!</a></li>
<li><a class="reference internal" href="#simulation-class-is-no-longer-an-app">Simulation class is no longer an App</a></li>
<li><a class="reference internal" href="#check-api-changes">Check API changes</a></li>
<li><a class="reference internal" href="#launching-the-recorder">Launching the recorder</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
<hr>
<ul class="nav">
  <h5>Previous topic</h5>
  <li>
    <a href="changelog.html" title="Previous Chapter: Changelog">
      Changelog
    </a>
  </li>
  <h5>Next topic</h5>
  <li>
    <a href="continuous_integration.html" title="Next Chapter: Continuous Integration">
      Continuous Integration
    </a>
  </li>
</ul>
          </aside>
        </div>
      </div>
    </section>
  </div>
</section>

<footer id="footer">
  <header class="row-fluid">
    <div class="content-wrapper text-center">
      Gatling is an open-source load testing framework based on
      <strong>Scala</strong>, <strong>Akka</strong> and <strong>Netty</strong>
    </div>
  </header>
  <section class="row-fluid">
    <div class="content-wrapper text-center">&copy;2014 eBusiness Information 2000-2014</div>
  </section>
</footer>






  </body>
</html>